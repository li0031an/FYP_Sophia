<!DOCTYPE html PUBLIC "-//w3c//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<!-- nochange.html
     This document illustrates using the focus event
     to prevent the user from changing a text field
     -->
<html xmlns = "http://www.w3.org/1999/xhtml">
    <head> <title> The Fruit Shop </title>

        <script type = "text/javascript">
        <!--
// The event handler function to compute the cost
            function computeCost() {
                var appleT = document.getElementById("apple");
                var orangeT = document.getElementById("orange");
                var bananaT = document.getElementById("banana");
                var costT = document.getElementById("cost")

                var apple = appleT.value;
                var orange = orangeT.value;
                var banana = bananaT.value;
// Compute the cost
		        var totalCost = (apple * 69 + orange * 59 + banana * 39)/100; //similar to toFixed(2) method
                costT.value = totalCost;

      }  //* end of computeCost

            function isNum(value){
                if (value.match(/^\d+$/))
                    return true;
                else
                    return false;
            }

            function chkQuantity(input) {
                if (!(input.value)){
                   alert(input.id + " fruit quantity "+ "cannot be empty. \n"
                   + "Please input zero instead." );
                   setTimeout(function(){input.focus();}, 1);
                   return false;
                }
                if (!isNum(input.value)){
                    alert("The quantity you entered: "+ input.id + ": " + input.value +" is not a valid digit. \n"
                      + "Please go back and input an integer quantity.");
                    setTimeout(function(){input.focus();}, 1);
                    return false;
                }
                return true;
            }

            function chkName(input) {
                if (!input.value){
                    alert("Name field cannot be empty!");
                    setTimeout(function(){input.focus();}, 1);
                    return false;
                }
                if (!input.value.match(/^[A-Za-z]+ [A-Za-z]+ *$/)){ //name must be alphabetic
                    alert("Please input a valid name! \n"
                     + "e.g. John Smith, Amy Green");
                    setTimeout(function(){input.focus();}, 1);
                    return false;
                }
                return true;
            }

            function chkPayMode() {
                var returnvalue;
                if (document.getElementById("Visa").checked) {
                    highlightPayMode("Visa");
                    returnvalue = true;
                } else if (document.getElementById("MasterCard").checked) {
                    highlightPayMode("MasterCard");
                    returnvalue = true;
                } else if (document.getElementById("Discover").checked){
                    highlightPayMode("Discover");
                    returnvalue = true;
                } else {
                    alert("Please select a payment method!");
                    returnvalue = false;
                }
                return returnvalue;
            }

// The event handler for a radio button collection
            function highlightPayMode (paymode) {
                alert("You are going to pay by " + paymode + " !");
            }

// function to check whether all required fields are filled with valid input
            function chkFinal(){
                var apple = document.getElementById("apple");
                var orange = document.getElementById("orange");
                var banana = document.getElementById("banana");
                var name = document.getElementById("name");

                if (!chkName(name)) return false;
                if (!chkQuantity(apple)) return false;
                if (!chkQuantity(orange)) return false;
                if (!chkQuantity(banana)) return false;
                if (!chkPayMode()) return false;

                if (!confirm("Please ensure all your input are correct!\nConfirm submission?")) {
                    return false;
                }
                return true;
            }
        </script>
    </head>

    <body>
        <form action = "orderReceipt.php" method = "post">
            <h3> Fruit Order Form </h3>

            <h4> Your name: <input type = "text"  id = "name"  name = "userName"
                                   size ="10" /> </h4>

            <table border = "border">



                <tr>
                    <th> Fruit Name </th>
                    <th> Price </th>
                    <th> Quantity </th>
                </tr>



                <tr>
                    <th> Apple </th>
                    <td> 69 cents </td>
                    <td> <input type = "text"  id = "apple"  name = "appleQuantity"
                                size ="2" onchange = "chkQuantity(this)" /> </td>
                </tr>
                <tr>
                    <th> Orange </th>
                    <td> 59 cents </td>
                    <td> <input type = "text"  id = "orange" name = "orangeQuantity"
                                size = "2" onchange = "chkQuantity(this)" /> </td>
                </tr>
                <tr>
                    <th> Banana </th>
                    <td> 39 cents </td>
                    <td> <input type = "text"  id = "banana" name = "bananaQuantity"
                                size = "2" onchange = "chkQuantity(this)" /> </td>
                </tr>
            </table>

            <!-- Button for computing real-time total cost -->
            <!-- registration way 1: event handler by onclick-->

            <p>
                <input type = "button"  value = "Total Cost"
                       onclick = "computeCost()" />
                <input type = "text"  size = "5"  id = "cost"
                       onfocus = "this.blur()" />
            </p>

            <!-- Radio buttons for payment method -->

            <h4> Please choose your payment method </h4>
            <p>
                <input type = "radio"  name = "paymentButton" id = "Visa" value = "Visa" />
                Visa
                <br />
                <input type = "radio"  name = "paymentButton"  id = "MasterCard" value = "MasterCard" />
                MasterCard
                <br />
                <input type = "radio"  name = "paymentButton"  id = "Discover" value = "Discover" />
                Discover

            </p>

            <!-- The submit and reset buttons -->

            <p>
                <input type = "submit"  value = "Submit Order" onclick = "return chkFinal()"/>
                <input type = "reset"  value = "Clear Order Form" />
            </p>
        </form>

<!-- registration way 2: event handler by assigning function object -->

        <script type = "text/javascript">
              <!--
                document.getElementById("apple").oninput = computeCost;
                document.getElementById("orange").oninput = computeCost;
                document.getElementById("banana").oninput = computeCost;
              // -->
            </script>

    </body>
</html>